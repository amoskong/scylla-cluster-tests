#endpoint_snitch: "Ec2MultiRegionSnitch"
endpoint_snitch: "Ec2Snitch"
store_results_in_elasticsearch: False

test_duration: 180
#OLD c-s Command
#stress_cmd: cassandra-stress write cl=QUORUM duration=180m -schema 'replication(factor=3)' -port jmx=6868 -mode cql3 native -rate threads=1000 -pop seq=1..10000000
stress_cmd: ["cassandra-stress write cl=QUORUM duration=180m -schema 'replication(factor=3) compaction(strategy=SizeTieredCompactionStrategy)' -port jmx=6868 -mode cql3 native -rate threads=1000 -pop seq=1..10000000 -log interval=5",
             "cassandra-stress counter_write cl=QUORUM duration=180m -schema 'replication(factor=3) compaction(strategy=DateTieredCompactionStrategy)' -port jmx=6868 -mode cql3 native -rate threads=5 -pop seq=1..10000000"
             #,"cassandra-stress user profile=/tmp/cs_mv_profile.yaml ops'(insert=3,read1=1,read2=1,read3=1)' cl=QUORUM duration=180m -port jmx=6868 -mode cql3 native -rate threads=100"
             ]
cassandra_stress_duration: 180
cassandra_stress_threads: 1000
cassandra_stress_population_size: 10000000
n_db_nodes: 6
#n_db_nodes: 4

n_loaders: 1
n_monitor_nodes: 1
instance_type_loader: 'c3.xlarge'
instance_type_monitor: 't2.small'
#nemesis_class_name: 'RefreshMonkey'
nemesis_class_name: 'ChaosMonkey'
nemesis_interval: 5
user_prefix: 'longevity-10gb-3h-3.0'
failure_post_behavior: keep
space_node_threshold: 64424
experimental: 'true'
user_agent: "e7a0f973-fa9a-47f4-8cbf-c90d86ddc38a"
#ip_ssh_connections: 'private'
ip_ssh_connections: 'public'
user_credentials_path: '~/.ssh/scylla-qa-ec2'
#instance_provision: spot_low_price
#instance_provision: spot_fleet
instance_provision: on_demand

regions: !mux
    us_east_1:
        region_name: 'us-east-1'
        security_group_ids: 'sg-c5e1f7a0'
        subnet_id: 'subnet-ec4a72c4'
        ami_id_db_scylla: ami-0920bf5168fd6152f
        ami_db_scylla_user: 'centos'
        ami_id_loader: ami-0920bf5168fd6152f
        ami_loader_user: 'centos'
        ami_id_db_cassandra: 'ami-ada2b6c4'
        ami_db_cassandra_user: 'ubuntu'
        ami_id_monitor: ami-0920bf5168fd6152f
        ami_monitor_user: 'centos'
    eu_west_1:
        region_name: 'eu-west-1'
        #security_group_ids: 'sg-059a7f66a947d4b5c'
        #subnet_id: 'subnet-088fddaf520e4c7a8'
        security_group_ids: 'sg-2aed154f'
        subnet_id: 'subnet-0598a743'
        ami_id_db_scylla: ami-0920bf5168fd6152f
        #ami_id_monitor: ami-0920bf5168fd6152f
        ami_id_monitor: 'ami-3548444c' # Clean CentOs 7 ami
        ami_id_loader: ami-0920bf5168fd6152f
        ami_db_scylla_user: 'centos'
        ami_loader_user: 'centos'
        ami_monitor_user: 'centos'


databases: !mux
    cassandra:
        db_type: cassandra
        instance_type_db: 'm3.large'
    scylla:
        db_type: scylla
        #instance_type_db: i3.4xlarge
        instance_type_db: i3.xlarge
